{% extends 'myapp/owner_base.html' %}
{% load static %}
{% block title %}My Agreements{% endblock %}
{% block body %}
<center>
    <!--#10. house_agreement - id, house_id, user_id, ag_dt, rent_dt, rent_advance, rent_amt, duration, dt, tm, status-->
    <h2><font color="#366092">Agreement List</font></h2>
<div class="container-fluid">
    <form name="frm" action="" method="post">
            {% csrf_token %}
         <table class="table table-striped table-bordered auto-index">
        <thead>
             <tr>
                <th>Sl.No</th>
                <th>House</th>
                <th>User</th>
                 <th>Rent Advance</th>
                 <th>Rent Amount</th>
                 <th>Duration</th>
                 <th>Agreement Date</th>
                 <th>Rent Day</th>
                <th>Date/Time</th>
                <th>Status</th>
                 <th>Action</th>
            </tr>
        </thead>
        {% for ha_obj in agreement_list %}
        <tbody>
        <tr class="info ">
            <td></td>
                 {% for house_obj in house_list %}
				{% if house_obj.id == ha_obj.house_id %}
					<td>{{ house_obj.house_name }}</td>
				{% endif %}
			{% endfor %}
            {% for user_obj in user_list %}
				{% if user_obj.user_id == ha_obj.user_id %}
					<td>{{ user_obj.fname }} {{ user_obj.lname }}</td>
				{% endif %}
			{% endfor %}
            <td>{{ ha_obj.rent_advance }}</td>
            <td>{{ ha_obj.rent_amt }}</td>
            <td>{{ ha_obj.duration }}</td>
            <td>{{ ha_obj.ag_dt }}</td>
            <td>{{ ha_obj.rent_dt }}</td>
            <td>{{ ha_obj.dt }} / {{ ha_obj.tm }}</td>
            <td>{{ ha_obj.status }}</td>
            <td>
                {% if ha_obj.status == 'active'%}
                    <a class="btn btn-primary" href="../owner_transaction_details_view?ref_id={{ha_obj.id}}">Transaction Details</a>
                {%endif%}
                {% if ha_obj.status == 'pending'%}
                    Advance Payment Pending
                {%endif%}

            </td>
        </tr>
             </tbody>
        {% endfor %}
        </table>

        {{msg}}
        <br/>

    </form>
</div>
</center>
<style>
  form
  {
    counter-reset: Serial;
  }
  table
  {
  }
  .auto-index td:first-child:before
  {
    counter-increment: Serial;
    content:counter(Serial);
  }
</style>
{% endblock %}